# Уточняющие вопросы по ТЗ

## 1. База данных и хранение данных

**Вопрос:** Какую базу данных использовать?
- ✅ **Предложено:** SQLite (для начала, легко мигрировать на PostgreSQL)
- ❓ **Альтернатива:** PostgreSQL, MySQL?

**Вопрос:** Где хранить фотографии анкет?
- ❓ Локально на сервере?
- ❓ В облачном хранилище (S3, Yandex Object Storage)?
- ❓ Использовать file_id из Telegram (рекомендуется для начала)?

**Рекомендация:** Начать с file_id из Telegram, позже можно мигрировать на облачное хранилище.

---

## 2. Администраторы

**Вопрос:** Как определяется администратор?
- ✅ **Предложено:** Список user_id в `.env` файле
- ❓ Нужна ли система ролей (суперадмин, модератор)?

**Вопрос:** Где админ получает уведомления о новых заказах?
- ❓ В личные сообщения каждому админу?
- ❓ В отдельный групповой чат (ORDERS_CHAT_ID)?
- ❓ Оба варианта?

**Рекомендация:** Использовать ORDERS_CHAT_ID для централизованных уведомлений.

---

## 3. Оплата

**Вопрос:** Как будет реализована оплата?
- ❓ Интеграция с платежной системой (ЮKassa, Stripe, CryptoPay)?
- ❓ Ручная обработка админом (отправка ссылки на оплату)?
- ❓ Только ручная обработка на первом этапе?

**Вопрос:** Как админ проверяет оплату?
- ❓ Вручную через платежную систему?
- ❓ Автоматическая проверка через API?
- ❓ Пользователь отправляет скриншот?

**Рекомендация:** Начать с ручной обработки, позже добавить интеграцию.

---

## 4. Даты и время

**Вопрос:** Как пользователь вводит дату?
- ✅ **Предложено:** Свободный ввод текстом (например: "14 июня", "26.11.2025")
- ❓ Использовать календарь из aiogram-dialog?
- ❓ Какой формат предпочтительнее?

**Вопрос:** Как парсить даты?
- ❓ Использовать библиотеку dateparser?
- ❓ Строгий формат (DD.MM.YYYY)?
- ❓ Гибкий парсинг (сегодня, завтра, через неделю)?

**Вопрос:** Что делать, если пользователь ввел прошедшую дату?
- ❓ Показать ошибку?
- ❓ Автоматически перенести на завтра?

---

## 5. Расчет стоимости

**Вопрос:** Формула расчета доплаты за участников:
- ✅ **Из ТЗ:** Доплата = базовая_цена × 50% × (количество_участников - 1)
- ❓ Подтвердите формулу: `1000₽ × 50% × 4 = 2000₽` (для 5 участников, базовая цена 1000₽)?

**Вопрос:** Приватка - это что?
- ❓ Подписка на месяц?
- ❓ Разовая встреча?
- ❓ Как рассчитывается стоимость приватки?

---

## 6. Уведомления и напоминания

**Вопрос:** Как реализовать напоминания за 15 минут до встречи?
- ❓ Использовать планировщик задач (APScheduler)?
- ❓ Проверять каждую минуту все заказы?
- ❓ Использовать cron задачи?

**Вопрос:** Что делать, если бот был перезапущен во время ожидания напоминания?
- ❓ Восстанавливать задачи из БД при старте?
- ❓ Проверять все заказы при старте?

**Вопрос:** Уведомления админу о проверке оплаты:
- ❓ Через 15 минут после статуса "В обработке"?
- ❓ Через 30 минут после статуса "Не оплачено"?
- ❓ Как реализовать эти таймеры?

---

## 7. Чат с администратором

**Вопрос:** Как реализован чат с админом?
- ❓ Пересылка сообщений пользователя админу?
- ❓ Создание отдельного диалога?
- ❓ Использование встроенного функционала Telegram (reply)?

**Вопрос:** Может ли админ отвечать пользователю через бота?
- ❓ Да, через бота
- ❓ Нет, только через личные сообщения

---

## 8. Анкеты девушек

**Вопрос:** Сколько фотографий в анкете?
- ✅ **Из ТЗ:** 3 фотографии
- ❓ Можно ли изменить количество?

**Вопрос:** Как загружать фотографии?
- ❓ Админ отправляет фото боту?
- ❓ Админ загружает через веб-интерфейс?
- ❓ Админ отправляет file_id?

**Вопрос:** Поиск игр при добавлении в анкету:
- ❓ Поиск по первым буквам (автодополнение)?
- ❓ Полный список с прокруткой?
- ❓ Оба варианта?

---

## 9. Навигация и UX

**Вопрос:** Что происходит при нажатии "Назад"?
- ❓ Возврат на предыдущий шаг диалога?
- ❓ Возврат в главное меню?

**Вопрос:** Нужна ли возможность отменить действие (например, при бронировании)?
- ❓ Да, кнопка "Отменить" на каждом шаге
- ❓ Нет, только "Назад"

---

## 10. Безопасность и валидация

**Вопрос:** Валидация данных при бронировании:
- ❓ Проверка формата даты/времени?
- ❓ Проверка разумности (не более X часов, не более Y участников)?
- ❓ Минимальные/максимальные значения?

**Вопрос:** Защита от спама:
- ❓ Ограничение количества заказов в день?
- ❓ Ограничение частоты действий?

---

## 11. Технические детали

**Вопрос:** Логирование:
- ❓ Нужны ли логи действий пользователей?
- ❓ Логи действий админов?
- ❓ Где хранить логи?

**Вопрос:** Обработка ошибок:
- ❓ Показывать пользователю технические ошибки?
- ❓ Только понятные сообщения?

**Вопрос:** Масштабирование:
- ❓ Планируется ли высокая нагрузка?
- ❓ Нужна ли поддержка нескольких ботов?

---

## 12. Дополнительные функции (не в ТЗ, но могут быть полезны)

**Вопрос:** Нужны ли статистика и аналитика?
- ❓ Количество заказов
- ❓ Популярные игры
- ❓ Популярные анкеты

**Вопрос:** Нужна ли система отзывов?
- ❓ Оценка встреч
- ❓ Комментарии

**Вопрос:** Нужна ли система промокодов/скидок?

---

## Приоритетные вопросы для начала разработки:

1. ✅ **База данных:** SQLite (принято)
2. ✅ **Хранение фото:** file_id из Telegram (принято)
3. ❓ **Оплата:** Ручная обработка или интеграция?
4. ❓ **Даты:** Формат ввода и парсинг
5. ❓ **Уведомления админу:** Личные сообщения или групповой чат?
6. ❓ **Напоминания:** Как реализовать планировщик?

